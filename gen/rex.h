/* Description: librex C header generated from emacs-regexp-ffi Rust code.

Copyright (C) 2024 Danny McClanahan <dmcC2@hypnicjerk.ai>
SPDX-License-Identifier: GPL-3.0-or-later

This file is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as
published by the Free Software Foundation; either version 3 of the
License, or (at your option) any later version.

This file is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <https://www.gnu.org/licenses/>. */

#ifndef rex_h
#define rex_h

/* Generated with cbindgen:0.26.0 */

/* This file is autogenerated from Rust code by cbindgen. */

#include <stdbool.h>
#include <stddef.h>
#include <stdint.h>

enum REX_RegexpError {
  None = 0,
  ParseError = 1,
  CompileError = 2,
  MatchError = 3,
};
typedef uint8_t REX_RegexpError;

typedef struct REX_ForeignSlice {
  size_t len;
  const void *data;
} REX_ForeignSlice;

typedef struct REX_Pattern {
  struct REX_ForeignSlice data;
} REX_Pattern;

typedef struct REX_CallbackAllocator {
  void *ctx;
  void *(*alloc)(void*, size_t);
  void (*free)(void*, void*);
} REX_CallbackAllocator;

typedef struct REX_Matcher {
  void *inner;
  struct REX_CallbackAllocator alloc;
} REX_Matcher;

typedef struct REX_Input {
  struct REX_ForeignSlice data;
} REX_Input;

#if defined(PANIC_TESTING)
void always_panic(void) __attribute__((noreturn));
#endif

/**
 * asdf
 */
__attribute__((warn_unused_result))
REX_RegexpError compile(const struct REX_Pattern *pattern,
                        const struct REX_CallbackAllocator *alloc,
                        struct REX_Matcher *out);

__attribute__((warn_unused_result))
REX_RegexpError execute(const struct REX_Matcher *matcher,
                        const struct REX_CallbackAllocator *_alloc,
                        const struct REX_Input *input);

#endif /* rex_h */
